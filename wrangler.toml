name = "itsocr"
compatibility_date = "2025-06-05"
compatibility_flags = ["nodejs_compat"]
main = ".svelte-kit/cloudflare/_worker.js"

# Static assets configuration
[assets]
directory = ".svelte-kit/cloudflare"
binding = "ASSETS"

# R2 Bucket for image storage
[[r2_buckets]]
binding = "R2_BUCKET"
bucket_name = "itsocr-images"

# Durable Objects for WebSocket connections
[durable_objects]
bindings = [
  { name = "OCR_SESSION", class_name = "OCRSession" },
  { name = "DASHBOARD_SESSIONS", class_name = "DashboardSessions" }
]

# DO migrations
[[migrations]]
tag = "v1"
new_classes = ["OCRSession", "DashboardSessions"]

# Environment variables (set via wrangler secret or dashboard)
# These are placeholders - actual values set in Cloudflare dashboard or via `wrangler secret put`
# Note: OLLAMA_ENDPOINT is hardcoded to https://ollama.itsocr.com in the DO
[vars]
# DATABASE_URL = "libsql://..."
# DATABASE_AUTH_TOKEN = "..."
# BETTER_AUTH_SECRET = "..."
# BETTER_AUTH_BASE_URL = "..."
# BETTER_AUTH_GITHUB_CLIENT_ID = "..."
# BETTER_AUTH_GITHUB_CLIENT_SECRET = "..."
# BETTER_AUTH_GOOGLE_CLIENT_ID = "..."
# BETTER_AUTH_GOOGLE_CLIENT_SECRET = "..."
